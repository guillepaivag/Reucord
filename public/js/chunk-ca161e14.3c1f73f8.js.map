{"version":3,"sources":["webpack:///./src/views/programaciones/locales.vue?fd29","webpack:///src/views/programaciones/locales.vue","webpack:///./src/views/programaciones/locales.vue?86e0","webpack:///./src/views/programaciones/locales.vue?ac85","webpack:///./src/views/programaciones/locales.vue?253c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","filtroLocal","model","value","callback","$$v","localSearch","expression","_l","list","local","_s","goToLocalProgramming","generateExcelOfAllProgrammingByLocal","localSelected","staticStyle","staticRenderFns","link","href","url","setAttribute","document","body","appendChild","click","remove","console","log","component"],"mappings":"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","file":"js/chunk-ca161e14.3c1f73f8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row searchingLocal\"},[_c('div',{staticClass:\"col-md-6\"},[_c('label',{staticClass:\"mt-3\",attrs:{\"for\":\"\"}},[_vm._v(\"Local:\")]),_c('b-form-input',{attrs:{\"list\":\"my-list-id\",\"placeholder\":\"Local\"},on:{\"keyup\":function($event){return _vm.filtroLocal()}},model:{value:(_vm.localSearch),callback:function ($$v) {_vm.localSearch=$$v},expression:\"localSearch\"}}),_c('datalist',{attrs:{\"id\":\"my-list-id\"}},_vm._l((_vm.list.localAmountToShow),function(local){return _c('option',[_vm._v(_vm._s(local))])}),0),_c('b-button',{attrs:{\"variant\":\"outline-primary mt-3\"},on:{\"click\":function($event){return _vm.goToLocalProgramming(_vm.localSearch)}}},[_vm._v(\"Elegir local\")]),_c('b-button',{attrs:{\"variant\":\"outline-primary mt-3 btnProgamacionesLocalExcel\"},on:{\"click\":function($event){return _vm.generateExcelOfAllProgrammingByLocal()}}},[_vm._v(\"Programaciones por local | Excel\")])],1),_c('div',{staticClass:\"col-md-6\"},[_c('label',{staticClass:\"mt-3\",attrs:{\"for\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.localSelected ? (\"Local seleccionado: \" + _vm.localSelected) : 'No tienes un local seleccionado')+\" \")]),(_vm.localSearch)?_c('b',{staticClass:\"mt-3\",staticStyle:{\"display\":\"block\"}},[_vm._v(\"Se traera todas las programaciones del \"),_c('u',[_vm._v(_vm._s(_vm.localSearch))]),_vm._v(\" como local.\")]):_c('h6',{staticClass:\"mt-3\"},[_vm._v(\"Elige un local :D\")])])]),_c('hr'),_c('div',{},[_c('router-view',{attrs:{\"localSelectedProp\":_vm.localSelected}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container\">\r\n\r\n        <div class=\"row searchingLocal\">\r\n            <div class=\"col-md-6\">\r\n                <label for=\"\" class=\"mt-3\">Local:</label>\r\n                <b-form-input \r\n                    list=\"my-list-id\" \r\n                    v-on:keyup=\"filtroLocal()\" \r\n                    v-model=\"localSearch\" \r\n                    placeholder=\"Local\"\r\n                ></b-form-input>\r\n\r\n                <datalist id=\"my-list-id\">\r\n                    <option v-for=\"local in list.localAmountToShow\">{{ local }}</option>\r\n                </datalist>\r\n\r\n                <b-button variant=\"outline-primary mt-3\" v-on:click=\"goToLocalProgramming(localSearch)\">Elegir local</b-button>\r\n                <b-button variant=\"outline-primary mt-3 btnProgamacionesLocalExcel\" v-on:click=\"generateExcelOfAllProgrammingByLocal()\">Programaciones por local | Excel</b-button>\r\n            </div>\r\n            <div class=\"col-md-6\">\r\n                <label for=\"\" class=\"mt-3\">\r\n                    {{ localSelected ? `Local seleccionado: ${localSelected}` : 'No tienes un local seleccionado' }}\r\n                </label>\r\n                <b class=\"mt-3\" style=\"display: block;\" v-if=\"localSearch\">Se traera todas las programaciones del <u>{{ localSearch }}</u> como local.</b>\r\n                <h6 class=\"mt-3\" v-else>Elige un local :D</h6>\r\n            </div>\r\n        </div>\r\n\r\n        <hr>\r\n\r\n        <div class=\"\">\r\n            <router-view :localSelectedProp=\"localSelected\"></router-view>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: '',\r\n    data() {\r\n        return {\r\n            system: {\r\n                loading: true,\r\n                error: false,\r\n            },\r\n            localSearch: '',\r\n            localSelected: '',\r\n            list: {\r\n                amountToShow: 5,\r\n                local: [],\r\n                localAmountToShow: []\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        goToLocalProgramming(newLocalSelected) {\r\n            if (newLocalSelected != this.localSelected) {\r\n                this.localSelected = newLocalSelected\r\n\r\n                this.$router.push({ \r\n                    name: 'Prog.Local', \r\n                    params: { \r\n                        local: newLocalSelected\r\n                    }\r\n                }).catch(() => {})\r\n                \r\n            } else {\r\n                console.log('iguales')\r\n            }\r\n        },\r\n\r\n        async filtroLocal(){\r\n            this.list.localAmountToShow = []\r\n\r\n            if(this.localSearch){\r\n                let cont = 0\r\n                for(let i = 0; i < this.list.local.length; i++){\r\n                    if(cont < this.list.amountToShow){\r\n                        if(this.list.local[i].includes(this.localSearch)){\r\n                            this.list.localAmountToShow.push(this.list.local[i])\r\n                            cont++\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }else{\r\n                for(let i = 0; i < this.list.amountToShow; i++){\r\n                    this.list.localAmountToShow.push(this.list.local[i])\r\n                }\r\n                \r\n            }\r\n        },\r\n\r\n        async generateExcelOfAllProgrammingByLocal() {\r\n            try {\r\n                const year = new Date().getFullYear()\r\n\r\n                const res = await this.axios.get(`/programmingLists/${year}`,\r\n                    {\r\n                        responseType: 'blob',\r\n                        headers: {\r\n                            Accept: 'application/octet-stream'\r\n                        }\r\n                    }\r\n                )\r\n                const fileName = res.headers['x-processed-filename']; // <= cabezera personalizada\r\n                const url = window.URL.createObjectURL(new Blob([res.data]));\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                // link.setAttribute('download', fileName);\r\n                link.setAttribute(\"download\", `ANDE_Informe_Programaciones.xlsx`);\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                link.remove();\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n    },\r\n    async mounted() {\r\n        // lista locales\r\n        const localesDB = await this.axios.post('/locales')\r\n\r\n        if(!localesDB.data.codigo.includes('Error')){\r\n            this.list.local = await localesDB.data.respuesta\r\n\r\n            // pushs los n primeros\r\n            for(let i = 0; i < this.list.amountToShow; i++){\r\n                this.list.localAmountToShow.push(this.list.local[i])\r\n            }\r\n\r\n        }else {\r\n            this.system.error = true\r\n            console.log(localesDB.data.respuesta)\r\n        }\r\n\r\n    },\r\n    created() {\r\n        this.localSearch = this.$route.params.local ? this.$route.params.local : ''\r\n        this.localSelected = this.$route.params.local ? this.$route.params.local : ''\r\n    },\r\n    destroyed() {\r\n        \r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n    @media screen and (max-width: 767px) {\r\n        .searchingLocal {\r\n            text-align: center;\r\n        }\r\n    }\r\n\r\n    @media screen and (min-width: 992px) {\r\n        .btnProgamacionesLocalExcel {\r\n            margin-left: 10px;\r\n        }\r\n    }\r\n\r\n    @media screen and (min-width: 470px) and (max-width: 767px) {\r\n        .btnProgamacionesLocalExcel {\r\n            margin-left: 10px;\r\n        }\r\n    }\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./locales.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./locales.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./locales.vue?vue&type=template&id=3cace99a&\"\nimport script from \"./locales.vue?vue&type=script&lang=js&\"\nexport * from \"./locales.vue?vue&type=script&lang=js&\"\nimport style0 from \"./locales.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./locales.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}